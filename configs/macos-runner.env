# ==========================================
# macOS GitHub Runner 配置
# ==========================================
# 适用于 macOS 主机上运行的 Docker 容器

# ==========================================
# REQUIRED CONFIGURATION
# ==========================================

# GitHub Personal Access Token
GITHUB_TOKEN=your_github_token_here

# GitHub 组织或用户名
GITHUB_OWNER=tricorelife-labs

# ==========================================
# RUNNER SCOPE
# ==========================================

# Runner 范围
RUNNER_SCOPE=org  # 或 repo

# 仓库名称（仅当 RUNNER_SCOPE=repo 时需要）
# GITHUB_REPOSITORY=your-repo

# ==========================================
# RUNNER CONFIGURATION - macOS 特定
# ==========================================

# Runner 名称
RUNNER_NAME=macos-runner-1

# Runner 标签 - 重要：添加 macOS 特定标签
# 注意：容器内仍是 Linux，但主机是 macOS
RUNNER_LABELS=self-hosted,linux,x64,docker,macos-host,org-runner

# 工作目录
RUNNER_WORKDIR=_work

# Runner 组
RUNNER_GROUP=default

# 临时 Runner
EPHEMERAL=false

# 禁用自动更新
DISABLE_AUTO_UPDATE=true

# ==========================================
# CONTAINER CONFIGURATION - macOS 优化
# ==========================================

# 容器名称
CONTAINER_NAME=macos-github-runner

# Runner Docker 镜像
RUNNER_IMAGE=ghcr.io/tricorelife-labs/github-runner-universal:latest

# Runner 平台 - macOS 上通常使用 amd64 或 arm64
# 对于 Apple Silicon (M1/M2/M3)，使用 linux/arm64
# 对于 Intel Mac，使用 linux/amd64
RUNNER_PLATFORM=linux/arm64  # 修改为适合你的 Mac 的架构

# 重启策略
RESTART_POLICY=unless-stopped

# ==========================================
# RESOURCE LIMITS - macOS 推荐配置
# ==========================================

# CPU 限制（macOS Docker Desktop 默认限制）
CPU_LIMIT=4
CPU_RESERVATION=2

# 内存限制（根据 Docker Desktop 设置调整）
MEMORY_LIMIT=8G
MEMORY_RESERVATION=4G

# ==========================================
# VOLUME MOUNTS - macOS 路径
# ==========================================

# 工作目录（使用绝对路径）
WORK_DIR=/Users/Shared/github-runner/work

# 缓存目录（macOS 优化路径）
CARGO_CACHE=/Users/Shared/github-runner/cache/cargo
NPM_CACHE=/Users/Shared/github-runner/cache/npm
MAVEN_CACHE=/Users/Shared/github-runner/cache/maven
GRADLE_CACHE=/Users/Shared/github-runner/cache/gradle

# 工具目录
TOOLS_DIR=/Users/Shared/github-runner/tools

# SSH 目录
SSH_DIR=/Users/Shared/github-runner/ssh

# ==========================================
# NETWORK CONFIGURATION
# ==========================================

# Docker 网络名称
NETWORK_NAME=macos-runner-network

# ==========================================
# macOS 特定注意事项
# ==========================================
# 1. Docker Desktop for Mac 必须安装并运行
# 2. 文件共享：在 Docker Desktop 设置中允许 /Users/Shared 访问
# 3. 资源限制：在 Docker Desktop -> Preferences -> Resources 中调整
# 4. Apple Silicon：使用 linux/arm64 平台以获得最佳性能
# 5. Intel Mac：使用 linux/amd64 平台